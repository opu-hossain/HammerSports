{% extends 'base.html' %}
{% block page_content %}

<div class="title">
    <h2>Blog Posts</h2>
</div>

{% for post in posts %}
    <article>
        <h3><a href="{% url 'Blog_details' slug=post.slug %}">{{ post.title }}</a></h3>
        <small>
            {{post.created_on.date}} | Categories: 
                {% for category in post.categories.all %}
                    <a href="{% url 'Blog_category' category.name %}">{{category.name}}</a>
                {% endfor %}
                {% if post.featured_image %}
                    <img src="{{ post.featured_image.url }}" alt="{{ post.title }}">
                {% endif %}
        </small>
        <p>{{ post.body|striptags|escape|slice:":400" }}...</p>
        <p>Tags: {% for tag in post.tags.all %}{{ tag.name }}{% if not forloop.last %}, {% endif %}{% endfor %}</p>
    </article>
{% endfor %}

{% endblock %}